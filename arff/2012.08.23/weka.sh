#!/bin/sh
#
# Runs various classifiers on data. This should be in
# a directory with testing and training information
#
# Brandon Amos
# 2012.08.23

# getResults <classifier>
function getResults {
    CLASSIFIER=$1
    MODEL=`echo $CLASSIFIER | sed 's/.*\.//'`

    cd TestData
    for file in *.arff; do
        java -cp /usr/share/java/weka/weka.jar \
            $CLASSIFIER \
            -l ../Models/$MODEL.model \
            -T $file \
            > $file.results
    done

    # Combine the results
    cd ../TestResults
    rm -rf $MODEL
    mkdir $MODEL
    cd $MODEL

    cp ../../TestData/*.results .

    for file in *.results; do
        echo $file >> results-$MODEL.txt
        cat $file | grep 'Correctly Classified Instances' >> results-$MODEL.txt
        cat $file | grep 'Incorrectly Classified Instances' >> results-$MODEL.txt
        echo >> results-$MODEL.txt
    done

    cd ../..
}

#########
# Start #
#########

getResults weka.classifiers.bayes.BayesNet
getResults weka.classifiers.bayes.NaiveBayes

getResults weka.classifiers.functions.Logistic
getResults weka.classifiers.functions.MultilayerPerceptron

getResults weka.classifiers.trees.J48
