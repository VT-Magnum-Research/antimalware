package org.vt.magnum.antimalware.main;

import org.vt.magnum.antimalware.features.WekaHelper;
import org.vt.magnum.malware.main.R;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.RadioGroup;
import android.widget.ToggleButton;

/**
 * The activity that initializes the service and controls the GUI.
 * @author Brandon Amos
 * @version 2012.08.10
 */
public class MalwareActivity extends Activity {
	private static final String TAG = "MalwareActivity";
	
	private ToggleButton trainingButton;
	private RadioGroup buttonGroup;
	
	private boolean isTraining;
	
	private WekaHelper wh;
	
    @Override
    public void onCreate(Bundle savedInstanceState) {
        Log.d(TAG, "onCreate");
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        
        startService(new Intent(this, MalwareService.class));

        trainingButton = (ToggleButton) findViewById(R.id.trainingButton);
        buttonGroup = (RadioGroup) findViewById(R.id.classRadioGroup);
        
        trainingButton.toggle();
        isTraining = true;
        
        wh = new WekaHelper();
        wh.writeClassification("positive");
    }
    
    public void trainingOnClick(View view) {
    	isTraining = !isTraining;
    	
    	if (isTraining)
    		buttonGroup.setVisibility(View.VISIBLE);
    	else
    		buttonGroup.setVisibility(View.INVISIBLE);
    }
    
    public void radioGroupOnClick( View view ) {
    	Log.i(TAG, "radioGroupOnClick");
    }
    
    public void radioOnClick( View view ) {
    	Log.i(TAG, "radioOnClick");
    	if ( buttonGroup.getCheckedRadioButtonId() == R.id.benignRadio )
    		wh.writeClassification("positive");
    	else
    		wh.writeClassification("negative");
    }
}